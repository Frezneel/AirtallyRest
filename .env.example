# ==============================================================================
# AirTally REST API - Environment Configuration
# ==============================================================================
# Copy this file to .env and update with your actual values
# ==============================================================================

# Database Configuration
# Format: postgresql://<user>:<password>@<host>:<port>/<database_name>
DATABASE_URL=postgresql://postgres:password@localhost:5432/airtally

# Database Connection Pool Configuration
# Production: min=10, max=50 | Development: min=2, max=10
DB_MIN_CONNECTIONS=5
DB_MAX_CONNECTIONS=20
DB_CONNECT_TIMEOUT=10
DB_ACQUIRE_TIMEOUT=30
DB_IDLE_TIMEOUT=600
DB_MAX_LIFETIME=1800
DB_TEST_ON_CHECKOUT=true

# Server Configuration
HOST=0.0.0.0  # 0.0.0.0 allows external access, use 127.0.0.1 for localhost only
PORT=3000

# Environment: development | staging | production
ENVIRONMENT=development

# Logging
# Levels: trace | debug | info | warn | error
# Default: debug in development, info in production
LOG_LEVEL=debug

# API Security
# API key for authentication (required for all API calls)
API_KEY=airtally_dev_key_2025
# Production key generation: openssl rand -hex 32
# Example: API_KEY=8f4a9c2b1e7d6f3a5c8e1b4d7a9f2c5e8b1a4d7e3f6c9b2e5a8d1f4c7b0e3a6

# Network Security
# Comma-separated list of allowed network ranges (CIDR notation)
# IMPORTANT: For DHCP environments, use smallest practical subnet!
#
# Examples:
# - Single subnet (256 IPs): ALLOWED_NETWORKS=10.17.6.0/24
# - Two subnets: ALLOWED_NETWORKS=10.17.6.0/24,10.17.7.0/24
# - Larger range (512 IPs): ALLOWED_NETWORKS=10.17.6.0/23
#
# ⚠️ WARNING: Do NOT use /16 (65,536 IPs) in production!
# ⚠️ Only use /24 (256 IPs) or smaller for DHCP deployments
ALLOWED_NETWORKS=10.17.6.0/24

# Rate Limiting
# Maximum requests per minute per IP address
# DHCP Environment Recommendations:
# - Light usage (scanning app): 60 req/min
# - Medium usage (frequent syncs): 120 req/min
# - Heavy usage (bulk operations): 200 req/min
RATE_LIMIT_PER_MINUTE=60

# API Documentation
# Enable Swagger UI at http://localhost:3000/swagger-ui
# WARNING: Auto-disabled in production for security
ENABLE_SWAGGER=true
